
#!/bin/sh
format() {
    if [ "$1" -eq 0 ]; then
        echo '-'
    else
        echo "$1"
    fi
}

if ! updates_arch="$(pacman -Qu | wc -l)"; then
    updates_arch=0
fi

if ! updates_aur="$(yay -Qum 2>/dev/null | wc -l)"; then
    updates_aur=0
fi

updates="$((updates_arch + updates_aur))"
UPDATES=$((updates_arch + updates_aur))

if hash notify-send &>/dev/null; then
    if (( UPDATES > 50 )); then
        notify-send -u critical "You really need to update!!" "$UPDATES New packages"
    elif (( UPDATES > 25 )); then
        notify-send -u normal "You should update soon" "$UPDATES New packages"
    elif (( UPDATES > 2 )); then
        notify-send -u low "$UPDATES New packages"
    fi
fi

if [ "$updates" -gt 0 ]; then
    echo " $updates_arch+$updates_aur"
else
    echo " None"
fi
